@model IPMS.Domain.ValueObjects.PrivilegeVO
@{
    ViewBag.Title = "Agent Master";
    Layout = "~/Views/Shared/_IPMSLayout.cshtml";

    var vcn = "";
    var showViewOnLoad = false;
    if (!string.IsNullOrEmpty(ViewBag.VCN))
    {
        ViewBag.Title = "Agent Registration";
        vcn = ViewBag.VCN;
        showViewOnLoad = true;
    }
}

@section scripts{
    <script src="~/Scripts/Lib/Globalize.min.js"></script>
    <script src="~/Scripts/Application/Model/AgentModel.js"></script>
    <script src="~/Scripts/Application/ViewModel/AgentViewModel.js"></script>
    <script src="~/Scripts/Lib/moment.js"></script>
    <script src="~/Scripts/Application/ViewModel/WorkflowTaskExecution.js"></script>
}
<script type="text/javascript">
    $(function () {
        var moveLeft = -1150;
        var moveDown = -35;
        var moveRight = 20;

        $('a#trigger').hover(function (e) {
            $('div#pop-up').show();
        }, function () {
            $('div#pop-up').hide();
        });

        $('a#trigger').mousemove(function (e) {
            // Commented and added by Srinivas
            $("div#pop-up").css('top', e.pageY + moveDown).css('right', moveRight);
            //$("div#pop-up").css('top', e.pageY + moveDown).css('left', e.pageX + moveLeft);
            //-- end
        });

    });
</script>
<style type="text/css">
    .k-tooltip-content {
        width: 350px !important;
        background: #fff !important;
    }

    .k-grid table tbody tr:hover {
        background: #fff !important;
    }

    .modal-dialog {
        width: 400px;
    }

    .PNDG {
        /*Pending*/
        background-color: #add8e6;
        width: 150px;
        height: 40px;
    }

    .legend-Pending {
        background: #add8e6;
    }

    .legend-UnPlanned {
        background: #add8e6;
    }
</style>

@section ko_apply
{
var showOnLoad = false;
if ("@showViewOnLoad" == "True")
{
 showOnLoad = true;
}

var viewModel = new IPMSROOT.AgentViewModel("@vcn", showOnLoad);	 
ko.applyBindingsWithValidation(viewModel, $("#AgentMaster")[0], { insertMessages: false, messagesOnModified: false, grouping: { deep: true }});
}
<style>
    .modal-dialog {
        width: 600px !important;
    }
</style>
<!-- Main body content starts here for developers-->

<div class="row">
    <div class="col-md-12">
        <h3 class="page-title"><span id="spnTitle">Agent Master</span></h3>
        <ul class="page-breadcrumb breadcrumb"></ul>
    </div>
</div>
<div id="AgentMaster">
    <div data-bind="visible: viewMode() == 'List', template: { name: 'List-template' }"></div>
    <div data-bind="visible: viewMode() == 'EditView', template: { name: 'Edit-template' }"></div>
    <div data-bind="visible: viewMode() == 'PopUp', template: { name: 'PopUp-template' }"></div>
</div>
<div class="clearfix"></div>

<script type="text/html" id="List-template">
    <div class="portlet-body">
        <div class="table-toolbar">
            <div id="tablewrapper15" data-bind="loadingWhen: $root.viewModelHelper.isLoading">
                <div id="tableheader">
                    @if (Model.HasAddPrivilege)
                    {
                        <a class="button gbtngreen" data-bind="click: $root.addAgent">Add New <i class="fa fa-plus"></i></a>
                    }
                    <div class="search" style="display: none">
                        <select id="columns" onchange="sorter.search('query')"></select>
                        <input type="text" id="query" onkeyup="sorter.search('query')" />
                        <a class="button gbtn" href="javascript:sorter.reset()">Reset <i class="fa fa-rotate-left"></i></a>
                    </div>
                </div>
                <div data-bind="kendoGrid: {
    data: AgentsList,
    groupable: false,
    scrollable: true,
    useKOTemplates: true,
    filterable: { extra: false, operators: { string: { startswith: 'Starts with', eq: 'Is equal to', neq: 'Is not equal to' } } },
    rowTemplate: 'rowTmpl',
    pageable: true,
    sortable: true,
    pageable: { pageSize: 10, pageSizes: 10, buttonCount: 5 },
    columns: [
    { field: 'ReferenceNo', title: 'Reference No.', width: 150, filterable: true },
    { field: 'RegisteredName', title: 'Agent Name', width: 150, filterable: true },
    { field: 'TradingName', title: 'Agency Reg. Name', width: 160, filterable: true },
    { field: 'RegistrationNumber', title: 'Reg. No.', width: 100, filterable: true },
    { field: 'ToDate', title: 'Validity', width: 100, filterable: false },
    { field: 'SkillsDevLevyNumber', title: 'Levy No.', filterable: false, width: 80 },
    { field: 'BBBEEStatus', title: 'BBBEE Status', filterable: false, width: 100 },
    { field: 'WorkFlowTask', title: 'Status', filterable: false, width: 100 },
    { title: 'Actions', width: 100 }]
}">
                </div>
                <script id="rowTmpl" type="text/html">
                    <tr>
                        <td>
                            <div data-bind="text: ReferenceNo"></div>
                        </td>
                        <td>
                            <div data-bind="text: RegisteredName"></div>
                        </td>
                        <td>
                            <div class="nowrap" data-bind="text: TradingName"></div>
                        </td>
                        <td>
                            <div data-bind="text: RegistrationNumber"></div>
                        </td>

                        <td>
                            <div class="nowrap" data-bind="text: ToDate != null ? moment(ToDate).format('YYYY-MM-DD') : ''"></div>
                        </td>
                        <td>
                            <div data-bind="text: SkillsDevLevyNumber"></div>
                        </td>
                        <td>
                            <div data-bind="text: BBBEEStatus"></div>
                        </td>
                        <td>
                            <div data-bind="text: WorkFlowTask == 'Verify' ? 'Verified' : WorkFlowTask == 'Approve' ? 'Approved' : WorkFlowTask == 'Reject' ? 'Rejected' : WorkFlowTask"></div>
                        </td>
                        <td>
                            <div class="nowrap">
                                @if (Model.HasViewPrivilege)
                                {
                                    <a href="javascript:;" data-bind="click: $parent.ViewAgent" title="View"><i class="fa fa-eye"></i></a>
                                }&nbsp; &nbsp;
                                @if (Model.HasEditPrivilege)
                                {
                                    <a href="javascript:;" data-bind="click: $parent.EditAgent" title="Edit"><i class="fa fa-edit"></i></a>
                                }&nbsp; &nbsp;
                                @if (Model.HasEditPrivilege)
                                {   
                                    <a href="#" data-target="#stack12" data-toggle="modal" data-bind="click: $parent.AddAgentAccountDetails, visible: WorkFlowTask == 'Approve' ? true : false" title="Add Acoount"><i class="fa fa-plus"></i></a>
                                }&nbsp; &nbsp;
                                <a href="#" data-bind="click: $parent.viewWorkFlow" title="View Workflow"><i class="fa fa-stack-exchange"></i></a>
                            </div>
                        </td>
                    </tr>
                </script>
            </div>
        </div>
    </div>
   <div class="form-body" data-bind="with: agentModel">
                <div class="form-group">
                    <div id="stack1" class="modal fade" tabindex="-1" data-width="400">
                        <div class="modal-dialog" style="width: 500px;">
                            <div class="modal-content">
                                <div class="modal-body">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                                    <div class="scroller" style="height: 225px" data-always-visible="1" data-rail-visible1="1">
                                        <fieldset>
                                            <legend id="spnTitile1">WorkFlow Remarks</legend>
                                           <div align="center"><textarea rows="3" cols="50" class="form-control"  id="WorkFlowRemarks"  style="width: 350px; height: 180px; text-align: center; margin:  0px 9.5px 0px 0px;resize: none;" data-bind="value: WorkFlowRemarks" disabled=""></textarea></div>
                                       </fieldset>
                                    </div>
                                </div>
                                <br>
                                &nbsp;
                            </div>
                        </div>
                    </div>
                </div>
            </div>

</script>
<script type="text/html" id="Edit-template">
    <div class="row" data-bind="loadingWhen: $root.viewModelHelper.isLoading">
        <div class="col-md-12">
            <div class="portlet" id="divFormWizardTabNavigation">
                <div class="portlet-body form">
                    <form action="#" class="form-horizontal" id="submit_form" data-bind='with: AgentData'>
                        <div class="form-wizard" data-bind='validationOptions: { messageTemplate: "customMessageTemplate" }' id="divRegistration">
                            <div class="form-body">
                                <ul class="nav nav-pills nav-justified steps" id="ulTabs">
                                    <li>
                                        <a data-toggle="tab" class="step" data-bind="click: $root.GotoTab1" style="cursor: pointer">
                                            <span class="number">1 
                                            </span>
                                            <span class="desc">
                                                <i class="fa fa-check"></i>Registration Details
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a data-toggle="tab" class="step" data-bind="click: $root.GotoTab2" style="cursor: pointer">
                                            <span class="number">2
                                            </span>
                                            <span class="desc">
                                                <i class="fa fa-check"></i>Documents Upload
                                            </span>
                                        </a>
                                    </li>
                                </ul>
                                <div id="bar" class="progress progress-striped" role="progressbar">
                                    <div class="progress-bar progress-bar-success">
                                    </div>
                                </div>
                                <div class="tab-content">

                                    <!--Tab1 Starts-->
                                    <div class="tab-pane active" id="tab1" data-bind="visible: viewModeForTabs() == 'register1', template: { name: 'register1-template' }"></div>
                                    <!--Tab1 ends here-->

                                    <!--Tab2 Starts here-->
                                    <div class="tab-pane active" id="tab2" data-bind="visible: viewModeForTabs() == 'register2', template: { name: 'register2-template' }"></div>
                                    <!--Tab2 ends here-->

                                </div>
                            </div>

                            <div class="form-actions fluid">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="btns-group form-actions fluid" data-bind="loadingWhen: $root.viewModelHelper.isLoading">
                                            <a href="javascript:;" class="btn default button-previous" id="btnGoBack" data-bind="click: $root.GoToPrevTab, visible: isGoBackVisible" style="display: none"><i class="m-icon-swapleft"></i> Back</a>
                                            <a href="javascript:;" class="btn default button-next" data-bind="click: $root.ValidateForm, visible: isSaveVisible" id="btnSaveContinue">Next <i class="m-icon-swapright"></i></a>
                                            <a href="javascript:;" class="btn green button-submit" id="btnSubmit" style="display: none" data-bind="click: $root.SaveAgent, visible: isSubmitVisible, loadingWhen: $root.viewModelHelper.isLoading">Submit</a>
                                            <a href="javascript:;" class="btn blue button-submit" id="btnReset" data-bind="click: $root.ResetAgent, visible: $root.IsReset">Reset</a>
                                            <a href="javascript:;" class="btn red button-submit" id="btnCancel" data-bind="click: $root.GotoAgentsList, visible: isCancelVisible">Cancel</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-actions fluid">
                                @{Html.RenderPartial(Url.Content("~/Views/Shared/PendingTaskView.cshtml"));}
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</script>
<script type="text/html" id="register1-template">
    <div class="form-group">
        <fieldset>
            <legend>Port of Operations<span style="color: red;">*</span></legend>

            <div class="row " id="divPortsList">
                <div style="float: right; font-size: 11px; padding: 1px 5px 4px; border: 1px solid #999; margin: -10px -7px 0 0;">
                    Inprogress <span style="width: 12px; height: 12px; display: inline-block; vertical-align: middle; background: yellow; border: 1px solid #c5c5c5; margin-right: 10px;"></span>
                    Approved <span style="width: 12px; height: 12px; display: inline-block; vertical-align: middle; background: green; border: 1px solid #c5c5c5;"></span>
                </div>
                <input type="checkbox" id="chkAllport" name="Allport" onclick="toggle(this)" />
                <label>Select all ports below</label>
                <div class="clearfix">
                    <br>
                </div>
                <div class="checkbox-list" id="divPortList" data-bind="foreach: PortData">
                    <div class="col-md-3">
                        <input class=".MycheckboxCls" type="checkbox" onclick="toggleSingle(this)" name="port" data-bind="    value: PortCode, attr: { id: 'chkPort_' + PortCode }"><label data-bind="    text: PortName"></label>@*, checked: $root.Selected*@
                    </div>
                </div>
            </div>
        </fieldset>
        <div class="clearfix">
            <br>
        </div>
        <div class="form-body" id="divAgentFields">
            <fieldset>
                <legend>Applicant Details</legend>

                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="control-label col-md-5">Name Of Applicant:<span class="required">*</span></label>
                            <div class="col-md-6">
                                <input type="text" class="form-control" ondragover="PreventDrop(event)" data-bind="value: RegisteredName, valueUpdate: 'keypress', event: { keypress: ValidateAlphabetsWithSpaces }" maxlength="100">
                            </div>
                        </div>
                    </div>
                    <!--/span-->
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="control-label col-md-5">Trading Name :<span class="required">*</span></label>
                            <div class="col-md-6">
                                <input type="text" class="form-control" ondragover="PreventDrop(event)" data-bind="value: TradingName, valueUpdate: 'keypress', event: { keypress: ValidateAlphabetsWithSpaces }" maxlength="100">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="control-label col-md-5">Registration Number:<span class="required">*</span></label>
                            <div class="col-md-6">
                                <input type="text" id="txtRegNo" class="form-control" ondragover="PreventDrop(event)" data-bind="value: RegistrationNumber, valueUpdate: 'keypress', event: { keypress: ValidateAlphanumeric, change: ValidRegNo }" maxlength="50">
                                <span id="spanregNo" class="validationError"></span>
                            </div>
                        </div>
                    </div>
                    <!--/span-->
                </div>
                <!--row-->

                <div class="row">

                    <!--/span-->
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="control-label col-md-5">Income Tax Number:<span class="required">*</span></label>
                            <div class="col-md-6">
                                <input type="text" id="txtIncomeTxNo" class="form-control" ondragover="PreventDrop(event)" data-bind="value: IncomeTaxNumber, valueUpdate: 'keypress', event: { keypress: ValidateAlphanumeric, change: ValidITNO }" maxlength="50">
                                <span id="spanitno" class="validationError"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="control-label col-md-5">VAT Number:<span class="required">*</span></label>
                            <div class="col-md-6">
                                <input type="text" id="txtVATNo" class="form-control" ondragover="PreventDrop(event)" data-bind="value: VATNumber, valueUpdate: 'keypress', event: { keypress: ValidateAlphanumeric, change: ValidVATNo }" maxlength="50">
                                <span id="spanvatno" class="validationError"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="control-label col-md-5">Levy No.:<span class="required">*</span></label>
                            <div class="col-md-6">
                                <input type="text" class="form-control" ondragover="PreventDrop(event)" data-bind="value: SkillsDevLevyNumber, valueUpdate: 'keypress', event: { keypress: ValidateAlphanumeric }" maxlength="50">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4" data-bind="visible: $root.isAddMode">
                        <div class="form-group">
                            <label class="control-label col-md-5">From Date:</label>
                            <div class="col-md-6">
                                <input id="FromDate" type="text" class="form-control datetime-picker" data-bind="kendoDatePicker: { value: FromDate, format: 'yyyy-MM-dd', enabled: false }," name="FromDate" maxlength="10" />
                                <span class="validationError" data-bind="validationMessage: FromDate"></span>

                            </div>
                        </div>
                    </div>
                    <div class="col-md-4" data-bind="visible: $root.isAddMode">
                        <div class="form-group">
                            <label class="control-label col-md-5">To Date:</label>
                            <div class="col-md-6">

                                <input id="ToDate" type="text" class="form-control datetime-picker" data-bind="kendoDatePicker: { value: ToDate, format: 'yyyy-MM-dd', enabled: false }" name="ToDate" maxlength="10" />
                                <span class="validationError" data-bind="validationMessage: ToDate"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="clearfix">
                    <br>
                </div>

                <div class="col-md-6">

                    <div style="margin-right: 5px;">
                        <fieldset id="fldPrincipalAddress">
                            <legend>Principal Place of Business</legend>

                            <div class="col-md-11">
                                <div class="form-group">
                                    <label class="control-label col-md-4">Number &amp; Street:<span class="required">*</span></label>
                                    <div class="col-md-8">
                                        <input type="text" id="txtBusinessstreet" class="form-control" ondragover="PreventDrop(event)" data-bind="value: NumberStreet, valueUpdate: 'keypress', event: { keypress: ValidateAlphanumeric }" maxlength="200">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-11">
                                <div class="form-group">
                                    <label class="control-label col-md-4">Suburb:<span class="required">*</span></label>
                                    <div class="col-md-8">
                                        <input type="text" id="txtBusinesssuburb" class="form-control" ondragover="PreventDrop(event)" data-bind="value: Suburb, valueUpdate: 'keypress', event: { keypress: ValidateAlphabetsWithSpaces }" maxlength="50">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-11">
                                <div class="form-group">
                                    <label class="control-label col-md-4">Town/City:<span class="required">*</span></label>
                                    <div class="col-md-8">
                                        <input type="text" id="txtBusinesstowncity" class="form-control" ondragover="PreventDrop(event)" data-bind="value: TownCity, valueUpdate: 'keypress', event: { keypress: ValidateAlphabetsWithSpaces }" maxlength="50">
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-11">
                                <div class="form-group">
                                    <label class="control-label col-md-4">Country:<span class="required">*</span></label>
                                    <div class="col-md-8">
                                        <select name="ResidentialAddressCountry" id="ResidentialAddressCountry" class="form-control" data-bind="options: $root.CountriesList, optionsText: 'SubCatName', optionsValue: 'SubCatCode', value: CountryCode, optionsCaption: 'Select...', valueUpdate: 'keypress'"></select>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-11">
                                <div class="form-group">
                                    <label class="control-label col-md-4">Postal Code:<span class="required">*</span></label>
                                    <div class="col-md-5">
                                        <input type="text" id="txtBusinesscode" class="form-control" maxlength="15" ondragover="PreventDrop(event)" data-bind="value: PostalCode, valueUpdate: 'keypress', event: { keypress: Validatenumeric }">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-11">
                                <div class="form-group">
                                    <label class="control-label col-md-4">Telephone No.:<span class="required">*</span></label>
                                    <div class="col-md-7">
                                        <input type="text" id="phone" class="form-control" maxlength="15" ondragover="PreventDrop(event)" data-bind="value: TelephoneNo1, valueUpdate: 'keypress', event: { keypress: Validatenumeric }">
                                    </div>
                                    <div class="col-md-5" style="display: none">
                                        <label class="control-label fc-col0">&nbsp;<a href="#" onclick="generateRow()">Add New</a></label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-11">
                                <div class="form-group">
                                    <label class="control-label col-md-4">Fax No.:<span class="required">*</span></label>
                                    <div class="col-md-7">
                                        <input type="text" id="faxno" class="form-control" maxlength="15" ondragover="PreventDrop(event)" data-bind="value: FaxNo, valueUpdate: 'keypress', event: { keypress: Validatenumeric }">
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                </div>
                <div class="col-md-6">
                    <div style="margin-left: 5px;">
                        <fieldset style="height: 198px;" id="fldPostalAddress">
                            <legend>Postal Address</legend>
                            <div class="col-md-11">
                                <div>
                                    <label>
                                        <input type="checkbox" id="chkBuisinessAddress" data-bind="click: $root.FillPostal, valueupdate: 'click'">Same as 'Principal place of Business'
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-11">
                                <div class="form-group">
                                    <label class="control-label col-md-4">Number &amp; Street:<span class="required">*</span></label>
                                    <div class="col-md-8">
                                        <input type="text" id="txtPostalstreet" class="form-control" data-bind="value: NumStreet2, valueUpdate: 'keypress', event: { keypress: ValidateAlphanumeric }" maxlength="200">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-11">
                                <div class="form-group">
                                    <label class="control-label col-md-4">Suburb:<span class="required">*</span></label>
                                    <div class="col-md-8">
                                        <input type="text" id="txtPostalsuburb" class="form-control" data-bind="value: Suburb2, valueUpdate: 'keypress', event: { keypress: ValidateAlphabetsWithSpaces }" maxlength="50">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-11">
                                <div class="form-group">
                                    <label class="control-label col-md-4">Town/City:<span class="required">*</span></label>
                                    <div class="col-md-8">
                                        <input type="text" id="txtPostaltowncity" class="form-control" ondragover="PreventDrop(event)" data-bind="value: TownCity2, valueUpdate: 'keypress', event: { keypress: ValidateAlphabetsWithSpaces }" maxlength="50">
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-11">
                                <div class="form-group">
                                    <label class="control-label col-md-4">Country:<span class="required">*</span></label>
                                    <div class="col-md-8">
                                        <select name="PostalAddressCountry" id="PostalAddressCountry" ondragover="PreventDrop(event)" class="form-control" data-bind="options: $root.CountriesList, optionsText: 'SubCatName', optionsValue: 'SubCatCode', value: CountryCode2, optionsCaption: 'Select...', valueUpdate: 'keypress'"></select>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-11">
                                <div class="form-group">
                                    <label class="control-label col-md-4">Postal Code:<span class="required">*</span></label>
                                    <div class="col-md-5">
                                        <input type="text" id="txtPostalcode" class="form-control" ondragover="PreventDrop(event)" data-bind="value: PostalCode2, valueUpdate: 'keypress', event: { keypress: Validatenumeric }" maxlength="15">
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                </div>

                <div class="clearfix">
                    <br>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div style="margin-right: 5px;">
                            <fieldset>
                                <legend>Authorized Contact Person Details</legend>
                                <div class="col-md-11">
                                    <div class="form-group">
                                        <label class="control-label col-md-4">First Name:<span class="required">*</span></label>
                                        <div class="col-md-8">
                                            <input type="text" class="form-control" ondragover="PreventDrop(event)" data-bind="value: FirstName, valueUpdate: 'keypress', event: { keypress: ValidateAlphabetsWithSpaces }" maxlength="100">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-11">
                                    <div class="form-group">
                                        <label class="control-label col-md-4">Surname:<span class="required">*</span></label>
                                        <div class="col-md-8">
                                            <input type="text" class="form-control" ondragover="PreventDrop(event)" data-bind="value: SurName, valueUpdate: 'keypress', event: { keypress: ValidateAlphabetsWithSpaces }" maxlength="100">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-11">
                                    <div class="form-group">
                                        <label class="control-label col-md-4">Identity No.:<span class="required">*</span></label>
                                        <div class="col-md-8">
                                            <input type="text" class="form-control" ondragover="PreventDrop(event)" data-bind="value: IdentityNo, valueUpdate: 'keypress', event: { keypress: ValidateAlphanumeric }" maxlength="15">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-11">
                                    <div class="form-group">
                                        <label class="control-label col-md-4">Designation:<span class="required">*</span></label>
                                        <div class="col-md-5">
                                            <input type="text" class="form-control" data-bind="value: Designation, valueUpdate: 'keypress', event: { keypress: ValidateAlphanumeric }" maxlength="15">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-11">
                                    <div class="form-group">
                                        <label class="control-label col-md-4">Cellular No.:<span class="required">*</span></label>
                                        <div class="col-md-3">
                                            <input type="text" id="CellularNo" class="form-control" ondragover="PreventDrop(event)" maxlength="15" data-bind="value: CellularNo, valueUpdate: 'keypress', event: { keypress: Validatenumeric }">
                                        </div>

                                    </div>
                                </div>
                                <div class="col-md-11">
                                    <div class="form-group">
                                        <label class="control-label col-md-4">Email Address:<span class="required">*</span></label>
                                        <div class="col-md-8">
                                            <input type="email" class="form-control" ondragover="PreventDrop(event)" data-bind="value: EmailID, event: { keypress: ValidateAlphanumeric }" maxlength="50">
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div style="margin-left: 5px;">
                            <fieldset style="height: 198px;">
                                <legend>Membership</legend>
                                <div class="col-md-11">
                                    <div class="form-group">
                                        <label class="col-md-5">SARS Tax Clearance Certified?</label>
                                        <div class="col-md-4">
                                            <div class="radio-list">
                                                <label class="radio-inline">
                                                    <input type="radio" name="SarsTaxCleaCert" value="Y" data-bind="checked: SARSTaxClearance">Yes</label>
                                                <label class="radio-inline">
                                                    <input type="radio" name="SarsTaxCleaCert" value="N" data-bind="checked: SARSTaxClearance">No</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-11">
                                    <div class="form-group">
                                        <label class="col-md-5">Are You A Member Of SAASOA?</label>
                                        <div class="col-md-4">
                                            <div class="radio-list">
                                                <label class="radio-inline">
                                                    <input type="radio" name="SAASOA" value="Y" data-bind="checked: SAASOA">
                                                    Yes
                                                </label>
                                                <label class="radio-inline">
                                                    <input type="radio" name="SAASOA" value="N" data-bind="checked: SAASOA">
                                                    No
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                </div>

                <div class="clearfix">
                    <br>
                </div>

                <fieldset>
                    <legend>Broad Based Black Economic Empowerment</legend>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                <label class="col-md-7">Do you qualify as Micro-Enterprise exempt in terms of BBBEE codes of good practice?</label>
                                <div class="col-md-2">
                                    <div class="radio-list">
                                        <label class="radio-inline">
                                            <input type="radio" name="BBBEEQualify" value="Y" data-bind="checked: QualifyBBBEECodes">
                                            Yes
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="BBBEEQualify" value="N" data-bind="checked: QualifyBBBEECodes">No
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix">
                        <br>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                <label class="col-md-7">BBBEE Status in terms of BBBEE codes of good practice?</label>
                                <div class="col-md-1">
                                    <select id="DDBBBEEStatus" class="form-control" data-bind="options: BBBEEStatuses, value: BBBEEStatus">
                                    </select>
                                </div>
                                <div class="col-md-1">
                                    <label class="control-label fc-col0">&nbsp;Contribution</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix">
                        <br>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <div>
                                <label class="col-md-7">Is your BBBEE status been verified by SANAS Accredited BEE verification agency?</label>
                                <div class="col-md-2">
                                    <div class="radio-list">
                                        <label class="radio-inline">
                                            <input type="radio" name="BBBEEStatVeri" value="Y" data-bind="checked: VerifyBBBEEStatus ">
                                            Yes
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="BBBEEStatVeri" value="N" data-bind="checked: VerifyBBBEEStatus ">
                                            No
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset>
                <div class="clearfix">
                    <br>
                    <br>
                </div>
            </fieldset>
        </div>
    </div>
</script>
<script type="text/html" id="register2-template">
    <fieldset>
        <legend>Documents Upload</legend>
        <div class="row fileupload-buttonbar">
            <div class="form-group" data-bind="visible: isView">

                <div class="col-md-4">
                    <select name="documents" id="selUploadDocs" class="form-control" data-bind="options: DocumentTypes, optionsText: 'SubCatName', optionsValue: 'SubCatCode', value: DocumentTypeCode, optionsCaption: 'Select...'">
                    </select>
                </div>
                <div class="col-md-7">
                    <span class="btn btn-sm green fileinput-button">
                        <i class="fa fa-plus"></i>
                        <span>Browse
                        </span>
                        <input type="file" name="files[]" id="fileToUpload" multiple>
                    </span>
                    <button type="button" data-bind="click: $parent.uploadFile" class="btn btn-sm blue start">
                        <i class="fa fa-upload"></i>
                        <span>Upload
                        </span>
                    </button>
                </div>
                <div class="row" data-bind="visible: $root.isfileToUpload">
                    <div class="form-group">
                        <div class="col-md-7">
                            &nbsp;&nbsp; <span id="spanHWPSfileToUpload" class="validationError" data-bind="visible: $root.isfileToUpload"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="table-responsive">
                <table class="table table-striped table-bordered table-advance">
                    <thead>
                        <tr>
                            <th class="bg-dark">Document Category</th>
                            <th class="bg-dark">Document Name</th>
                            <th class="bg-dark"></th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: AgentDocumentsVO">
                        <tr>
                            <td data-bind="text: CategoryName "></td>
                            <td><a data-bind="text: FileName, attr: { href: '/FileDownload/AgentDocuments/' + DocumentID() }">Document</a></td>
                            <td><a href="#" class="btn default btn-xs red" data-bind="click: $root.DeleteDocument, visible: isView"><i class="fa fa-trash-o"></i>Delete</a></td>
                            @*<td>&nbsp;</td>*@

                        </tr>
                        @*  <tr class="be-grey">
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>*@
                    </tbody>
                </table>
            </div>
        </div>
    </fieldset>
</script>
<script id="customMessageTemplate" type="text/html">
    <span class="validationError" data-bind='validationMessage: field'></span>
</script>
<span id="spanStatus" style="display: none">A</span>


@* <script type="text/html" id="PopUp-template">
    <div class="portlet-body" id="popup1" data-bind="with: AgentData">
        <div class="table-toolbar" data-bind="loadingWhen: $root.viewModelHelper.isLoading">
            <div id="stack12" class="modal fade" tabindex="-1" data-width="400" data-backdrop="static" data-keyboard="false">
                <a href="#tab_0" data-toggle="tab"></a>
                <div class="modal-dialog" id="stk">
                    <div class="modal-content">
                        <div class="modal-body">
                            @*  <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                            <div class="scroller" style="height: auto;" data-always-visible="1" data-rail-visible1="1">
                            
                                <fieldset>
                                    <legend>Add Agent Accounts:</legend>
                                    <form action="#" id="form_sample_1" class="form-horizontal">
                                        <div class="form-group row">
                                            <div class="table-toolbar">
                                                <div>
                                                    <div class="form-group">
                                                        <label class="control-label col-md-6">Agent Registration Number:</label>
                                                        <div class="col-md-6 control-label txtblue">
                                                            <label class="col-md-12 displaytxt" data-bind="text: RegistrationNumber"></label>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label col-md-6">Agent Registered Name:</label>
                                                        <div class="col-md-6 control-label txtblue">
                                                            <label class="col-md-12 displaytxt" data-bind="text: RegisteredName"></label>
                                                        </div>
                                                    </div>
                                                </div>
                                  
                                                <div id="popuptableheader">
                                                    <a class="button gbtngreen" data-bind="click: $root.AddNewRowtotable ">Add New <i class="fa fa-plus"></i></a>
                                                </div>
                                                <div class="table-scrollable">
                                                    <table cellpadding="0" cellspacing="0" border="0" id="tblmovementsdetails" class="tinytable">
                                                        <thead>
                                                            <tr>
                                                                <th>Port</th>
                                                                <th>AccountNo</th>
                                                                <th>Status</th>
                                                                <th></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody data-bind="foreach: AgentAccountVO">
                                                            <tr>
                                                                <td>
                                                                    <select class="form-control" onchange="" id="AccountPortcode" data-bind="options: $root.Approvedports, optionsText: 'PortName', optionsValue: 'PortCode', optionsCaption: 'Select Port ', value: PortCode, event: { change: $root.AccountnoChange }"></select>
                                                                    <span class="validationError" id="msgAccountPortcode"></span>                                                                       
                                                                </td>
                                                                <td>
                                                                    <input type="text" onchange="AccountnoChange(this)" class="form-control" id="AccountNo" data-bind="value: AccountNo, event: { keyup: $root.validationtextbox }" maxlength="15" />
                                                                <span class="validationError" id="msgAccountno"></span>   
                                                                </td>
                                                                <td>
                                                                    <select id="AgentStatus"  name="" data-bind="options: [{ name: 'Active', val: 'A' }, { name: 'InActive', val: 'I' }], optionsText: 'name', optionsValue: 'val', value: RecordStatus"></select>
                                                                </td>
                                                                   <td>
                                                                    <a href='#' class="focus1" id="RemoveAddNewRowtotable" data-bind="click: $root.RemoveAddNewRowtotable" title="Delete"><i class="fa fa-ban"></i></a>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>

                                        </div>
                                    </form>
                                </fieldset>
                            </div>
                        </div>
                        <div class="btns-group ">
                            <input type="button" id="popupSave" data-dismiss="modal" value="Submit" data-bind="click: $parent.AddAgentAccounts, enable:$root.SaveEnable" aria-hidden="true" class="btn green" />
                            <input type="button" data-dismiss="modal" value="Cancel" data-bind="click: $parent.cancelAgentAccounts" aria-hidden="true" class="btn red" />

                        </div>
                        <br>
                        &nbsp;
                    </div>
                </div>
            </div>

        </div>
    </div>
</script> *@



@*<div id="PopUp-template" class="modal fade">
        <div class="modal-dialog" style="width: 588px; height: 333px;">
            <div class="modal-content" >
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title"> Agent Account Number details<span id="OtherThanTugHeader"></span></h4>
                </div>
                <form action="#" id="form_sample_1" class="form-horizontal" >
                    <div class="modal-body" data-bind="with: AgentData">
                        <fieldset>
                            <legend> Agent Details:</legend>
                                 <div class="form-group row" >
                                <div class="col-md-12" >
                                    <label class="control-label col-md-6">Agent Registered Name:</label>
                                    <label class="displaytxt col-md-6" style="padding: 7px 3px 0 0px;" id="selectedAgentRegisteredName" ></label>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-md-12" >
                                    <label class="control-label col-md-6">Agent Registration Number:</label>
                                    <label class="displaytxt col-md-6" style="padding: 7px 3px 0 0px;" id="selectedAgentRegistrationNumber" ></label>
                                </div>
                            </div>                       
                        </fieldset>

                        <fieldset>
                            <legend>Add Agent Accounts:</legend>
                            <div class="form-group" >
                                <div id="popuptableheader"  >
                                    <a class="button gbtngreen" data-bind="click: $root.AgentData().AddNewRowtotable ">Add New <i class="fa fa-plus"></i></a>
                                     <lable data-bind="text:PortCode "></lable>
                                </div>
                                <div class="table-scrollable"  >
                                   
                                    <table cellpadding="0" cellspacing="0" border="0" id="tblmovementsdetails" class="tinytable" >
                                        <thead>
                                            <tr>
                                                <th>Port</th>
                                                <th>AccountNo</th>
                                                <th>Status</th>
                                            
                                            </tr>
                                        </thead>
                                        <tbody data-bind="foreach: $root.AgentData().AgentAccountVO">
                                            <tr>
                                                <td>
                                                    <select class="form-control"  data-bind="options: $root.AgentData().Approvedports, optionsText: 'PortName', optionsValue: 'PortCode', optionsCaption: 'Select Port ', value: PortCode"></select>
                                                    <span class="validationError" id="msgAccountPortcode"></span>
                                                </td>
                                                <td>
                                                    <input type="text"  class="form-control" id="AccountNo" data-bind="value: $root.AgentData().AgentAccountVO().AccountNo, event: { keyup: $root.validationtextbox }" maxlength="15" />
                                                    <span class="validationError" id="msgAccountno"></span>
                                                </td>
                                                <td>
                                                    <select id="AgentStatus" name="" data-bind="options: [{ name: 'Active', val: 'A' }, { name: 'InActive', val: 'I' }], optionsText: 'name', optionsValue: 'val', value: RecordStatus"></select>
                                                </td>
                                         
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </fieldset>
                        <div class="btns-group form-actions fluid">
                            <input type="button" id="popupSave" data-dismiss="modal" value="Submit" data-bind="click: $parent.AddAgentAccounts" aria-hidden="true" class="btn green" />
                            <input type="button" data-dismiss="modal" value="Cancel" data-bind="click: $parent.cancelAgentAccounts" aria-hidden="true" class="btn red" />
                        </div>
                    </div>
                </form>

            </div>
            <!-- /.modal-content -->
        </div>

        <!-- /.modal-dialog -->
    </div>*@


<script type="text/html" id="PopUp-template">
    <div class="portlet portlet-body form">
        <form action="#" id="submit_form1" class="form-horizontal">
            <div class="form-wizard" data-bind='validationOptions: { messageTemplate: "customMessageTemplate" }'>
                <div class="form-body" data-bind='with: AgentData'>
                    <div id="divValidationError1" class="alert alert-danger display-none">
                        <button class="close" data-dismiss="alert"></button>
                        You have some form errors. Please check below.
                    </div>
                    <div id="divValidationSuccess1" class="alert alert-success display-none">
                        <button class="close" data-dismiss="alert"></button>
                        Your form validation is successful!
                    </div>
                    <fieldset>
                        @*      <legend>Agent Account Number details<span style="color: red;">*</span></legend>*@
                        <fieldset>
                            <legend>Agent Details:</legend>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="control-label col-md-5">Name Of Applicant:</label>
                                        <div class="col-md-6">
                                            <label style="padding: 7px 3px 0 0px;" id="selectedNameOfApplicant"></label>
                                        </div>
                                    </div>
                                </div>
                                <!--/span-->
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="control-label col-md-5">Registered Name :</label>
                                        <div class="col-md-6">
                                            <label style="padding: 7px 3px 0 0px;" id="selectedAgentRegisteredName"></label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="control-label col-md-5">Reference Number:</label>
                                        <div class="col-md-6">
                                            <label style="padding: 7px 3px 0 0px;" id="selectedAgentReferenceNumber"></label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="control-label col-md-5">Registration Number:</label>
                                        <div class="col-md-6">
                                            <label style="padding: 7px 3px 0 0px;" id="selectedAgentRegistrationNumber"></label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="control-label col-md-5">Validity :</label>
                                        <div class="col-md-6">
                                            <label style="padding: 7px 3px 0 0px;" id="selectedAgentValidity"></label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="control-label col-md-5">Levy No.:</label>
                                        <div class="col-md-6">
                                            <label style="padding: 7px 3px 0 0px;" id="selectedAgentLevyNo"></label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <!--/span-->
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="control-label col-md-5">Income Tax Number:</label>
                                        <div class="col-md-6">
                                            <label style="padding: 7px 3px 0 0px;" id="selectedAgentIncomeTaxNumber"></label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="control-label col-md-5">VAT Number:</label>
                                        <div class="col-md-6">
                                            <label style="padding: 7px 3px 0 0px;" id="selectedAgentVATNumber"></label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="control-label col-md-5">BBBEE Status.:</label>
                                        <div class="col-md-6">
                                            <label style="padding: 7px 3px 0 0px;" id="selectedAgentBBBEEStatus"></label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="control-label col-md-5">Status:</label>
                                        <div class="col-md-6">
                                            <label style="padding: 7px 3px 0 0px;" id="selectedAgentStatus"></label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </fieldset>
                        <fieldset>
                            <legend>Add Agent Accounts:</legend>
                            <div class="form-group">
                                <div id="popuptableheader">
                                    <a class="button gbtngreen" data-bind="click: $root.AddNewRowtoAccounttable ">Add New <i class="fa fa-plus"></i></a>
                                </div>
                                <div class="table-scrollable">
                                    <table cellpadding="0" cellspacing="0" border="0" id="tblagentAccountdetails" class="tinytable">
                                        <thead>
                                            <tr>
                                                <th style="padding-left: 10px;">Port</th>
                                                <th style="padding-left: 10px;">Account No.</th>
                                                <th style="padding-left: 10px;">Status</th>
                                                @*   <th></th>*@
                                            </tr>
                                        </thead>
                                        <tbody data-bind="foreach: AgentAccountVO">
                                            <tr>
                                                <td>
                                                    <select class="form-control" data-bind="options: $root.Approvedports, optionsText: 'PortName', optionsValue: 'PortCode', value: PortCode, attr: { id: 'idAgentPorts' + $index() }"></select>
                                                </td>
                                                <td>
                                                    <input type="text" class="form-control" data-bind="value: AccountNo, event: { keyup: $root.validationtextbox }, attr: { id: 'idAgentAccount' + $index() }" maxlength="15" />
                                                </td>
                                                <td>
                                                    <select id="AgentStatus" class="form-control" name="" data-bind="options: [{ name: 'Active', val: 'A' }, { name: 'InActive', val: 'I' }], optionsText: 'name', optionsValue: 'val', value: RecordStatus"></select>
                                                </td>
                                                @*           <td class="NeedToHide"><a href="#" class="btn default btn-xs red" data-bind="click: $root.RemoveAddNewRowtoAccounttable"><i class="fa fa-trash-o"></i>Delete</a></td>*@

                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </fieldset>
                    </fieldset>
                    <div class="btns-group form-actions fluid">
                        <input type="button" id="popupSave" data-dismiss="modal" value="Submit" data-bind="click: $parent.SaveAgentAccounts" aria-hidden="true" class="btn green" />
                        <input type="button" data-dismiss="modal" value="Cancel" data-bind="click: $parent.cancelAgentAccounts" aria-hidden="true" class="btn red" />
                    </div>
                </div>
            </div>
        </form>
    </div>
</script>
