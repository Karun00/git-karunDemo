@model IPMS.Domain.ValueObjects.PrivilegeVO
@{
    ViewBag.Title = "Berth Occupation";
    Layout = "~/Views/Shared/_IPMSLayout.cshtml";

var berthoccupationid = 0;
    var showViewOnLoad = false;
    if (!string.IsNullOrEmpty(ViewBag.ID))
    {
        berthoccupationid = Convert.ToInt32(ViewBag.ID);
        showViewOnLoad = true;
    }
}


@section scripts
{
    <script src="~/Scripts/Application/Model/BerthOccupationModel.js"></script>
<script src="~/Scripts/Application/ViewModel/BerthOccupationViewModel.js"></script>
}
@section ko_apply
{
var showOnLoad = false;
    if ("@showViewOnLoad" == "True")
    {
         showOnLoad = true;
    }
    var viewModel = new IPMSROOT.BerthOccupationViewModel("@berthoccupationid", showOnLoad);
 
ko.applyBindingsWithValidation(viewModel, $("#BerthOccupation")[0], { insertMessages: false, messagesOnModified: false, grouping: { deep: true }});
}

<!-- BEGIN CONTENT -->

<div class="row">
    <div class="col-md-12">
        <h3 class="page-title"><span id="spnTitile"></span></h3>
        <ul class="page-breadcrumb breadcrumb"></ul>
    </div>
</div>

<div id="BerthOccupation">

    <div data-bind="visible: viewMode() == 'List', template: { name: 'List-template' }"></div>

    <div data-bind="visible: viewMode() == 'Form', template: { name: 'Form-template' }"></div>
</div>
<!-- Main body content starts here for developers-->

<div class="clearfix"></div>

<div class="portlet-body">
    <div class="table-toolbar">
        <script type="text/html" id="List-template">
            <div id="tableheader">

                <a class="button gbtngreen" data-bind="click: $root.addBerthOccupation ">Add New <i class="fa fa-plus"></i></a>

            </div>
            <div data-bind="kendoGrid: {
    data: BerthOccupationList,
    groupable: false,
    sortable: true,
    scrollable: true,
    filterable: { extra: false, operators: { string: { startswith: 'Starts with', eq: 'Is equal to', neq: 'Is not equal to' } } },
    rowTemplate: 'rowTmpl',
    pageable: { pageSize: 5, pageSizes: 5 },
    useKOTemplates: true, columns: [{ field: 'DredgingPriorityID', title: 'DredgingPriority ID', width: '60px', filterable: true }
               , { field: 'DredgingPriorityID', title: 'Occupation From', width: '120px', filterable: true },
                { field: 'DredgingPriorityID', title: 'Occupation To', width: '120px', filterable: true },
               { field: 'DredgingPriorityID', title: 'BerthOccupation ID', width: '120px', filterable: true },
               { title: 'Actions', width: '100px', filterable: false }]

}">
            </div>
            <script id="rowTmpl" type="text/html">
                <tr>

                    <td>
                        <div class="nowrap"><span data-bind="text: DredgingPriorityID"></span></div>
                    </td>
                    <td>
                        <div class="nowrap"><span data-bind="text: DredgingPriorityID"></span></div>
                    </td>
                    <td>
                        <div class="nowrap"><span data-bind="text: DredgingPriorityID"></span></div>
                    </td>
                    <td>
                        <div class="nowrap"><span data-bind="text: DredgingPriorityID"></span></div>
                    </td>

                    <td>
                        <div class="nowrap">
                            <a href="#" data-bind="click: $parent.viewberthoccupation" title="View"><i class="fa fa-eye"></i></a>
                            <a href="#" data-bind="click: $parent.editberthoccupation" title="Edit"><i class="fa fa-edit"></i></a>



                        </div>
                    </td>
                </tr>
            </script>

        </script>
        <!--07.11.2014------------------------------------------------------------------------------------------------------------------------------------------->
        <script id="customMessageTemplate" type="text/html">
            <span class="validationError" data-bind='validationMessage: field'></span>
        </script>

        <script type="text/html" id="Form-template">
            <div class="portlet portlet-body form">
                <form action="#" id="form_sample_1" class="form-horizontal">
                    <div class="form-wizard" data-bind='validationOptions: { messageTemplate: "customMessageTemplate" }'>
                        <div class="form-body" data-bind="with: berthoccupationModel">
                            <div id="divValidationError" class="alert alert-danger display-none">
                                <button class="close" data-dismiss="alert"></button>
                                You have some form errors. Please check below.
                            </div>
                            <div id="divValidationSuccess" class="alert alert-success display-none">
                                <button class="close" data-dismiss="alert"></button>
                                Your form validation is successful!
                            </div>
                            <div class="tab-pane active" id="tab1">
                                <div class="form-group">
                                    <fieldset>
                                        <legend>Berth Occupation Details</legend>

                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label col-md-6">
                                                        Financial Year:
                                                    	<span class="required"></span>
                                                    </label>
                                                    <div class="col-md-6">
                                                        <!--<input type="text" class="form-control" name="FinancialYear" data-bind="value: FinancialYear, enable: $parent.editableView">-->
                                                       @* <input id="FinancialYear" name="FinancialYear" title="FinancialYear" data-bind="kendoDropDownList: { data: $root.berthoccupationreferenceData().FinancialYears, value: FinancialYearCode, dataTextField: 'SubCatName', dataValueField: 'SubCatCode', optionLabel: 'Select Financial Year', enable: $parent.editableView }" />*@
                                                         @* <input id="FinancialYear" name="FinancialYear" title="FinancialYear" data-bind="kendoDropDownList: { data: $parent.FinancialYearList, value: FinancialYearID, dataTextField: 'FinancialYearDate', dataValueField: 'FinancialYearID', optionLabel: 'Select Financial Year', enable: $parent.editableView }" />*@
                                                           <label class="col-md-12 displaytxt" data-bind="text: FinancialYearID" />
                                                       
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label col-md-6">
                                                        Dredging Type:
                                                    	<span class="required"></span>
                                                    </label>
                                                    <div class="col-md-6" data-bind="with: DredgingPriorityAreasVO">
                                                       @* <input id="DredgingType" name="DredgingType" title="DredgingType" data-bind="kendoDropDownList: { data: $root.berthoccupationreferenceData().DredgingTypes, value: DredgingTypeCode, dataTextField: 'SubCatName', dataValueField: 'SubCatCode', optionLabel: 'Select Dredging Type', select: $root.DredgingPrioritySelect, enable: $parent.editableView }" />

                                                        <span id="spanoiltype" class="validationError" data-bind="validationMessage: DredgingTypeCode "></span>*@
                                                      <label class="col-md-12 displaytxt" data-bind="text: DredgingTypeCode" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label col-md-6">
                                                        Area:
                                                    	<span class="required"></span>
                                                    </label>
                                                    <div class="col-md-6" data-bind="with: DredgingPriorityAreasVO">
                                                        <!--  <input id="AreaType" name="AreaType" title="AreaType" data-bind="kendoDropDownList: { data: $root.dredgingvolumereferenceData().AreaTypes, value: AreaCode, dataTextField: 'SubCatName', dataValueField: 'SubCatCode', optionLabel: 'Select Area Type', enable: $parent.editableView }" />
                                                        <span id="spanoiltype" class="validationError" data-bind="validationMessage: AreaCode "></span>-->
                                                       @* <input type="text" class="form-control" name="Areacode" data-bind="value: AreaCode, enable: $parent.editableView">*@
                                                          <label class="col-md-12 displaytxt" data-bind="text: AreaCode" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label col-md-6">
                                                        Required Date:
                                                    	<span class="required"></span>
                                                    </label>

                                                    <div class="col-md-6">
                                                        <div class="col-md-6 control-label">
                                                            <label class="col-md-12 displaytxt" style="text-transform: capitalize;" data-bind="text: RequiredDate"></label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label col-md-6">
                                                        Design Depth:
                                                    	<span class="required"></span>
                                                    </label>
                                                    <div class="col-md-6">
                                                        <div class="col-md-6 control-label">
                                                            <label class="col-md-12 displaytxt" style="text-transform: capitalize;" data-bind="text: DesignDepth"></label>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label col-md-6">
                                                        Promulgate Depth:
                                                    	<span class="required"></span>
                                                    </label>

                                                    <div class="col-md-6">
                                                        <div class="col-md-6 control-label">
                                                            <label class="col-md-12 displaytxt" style="text-transform: capitalize;" data-bind="text: PromulgateDepth"></label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label col-md-6">
                                                        Requirement:
                                                    	<span class="required"></span>
                                                    </label>
                                                    <div class="col-md-6">
                                                    </div>

                                                    <div class="col-md-6">
                                                        <div class="col-md-6 control-label">
                                                            <label class="col-md-12 displaytxt" style="text-transform: capitalize;" data-bind="text: Requirement"></label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label col-md-6">
                                                        Remarks:
                                                    	<span class="required"></span>
                                                    </label>


                                                    <div class="col-md-6">
                                                        <div class="col-md-6 control-label">
                                                            <label class="col-md-12 displaytxt" style="text-transform: capitalize;" data-bind="text: Remarks"></label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="txtline"></div>
                                        <div>&nbsp;</div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label col-md-6">
                                                        Occupation From:
                                                    	<span class="required">*</span>
                                                    </label>
                                                    <div class="col-md-6">
                                                        <input id="OccupationFrom" type="text" title="Occupation From" class="form-control date-picker" data-bind="kendoDateTimePicker: { value: OccupationFrom, format: 'yyyy-MM-dd HH:mm:ss', timeFormat: 'HH:mm', readonly: true, min: StartDate}, event: { change: ValidDate }" name="Datepicker" maxlength="16" />
                                                        <span class="validationError" data-bind="validationMessage: OccupationFrom"></span>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label col-md-6">
                                                        Occupation To:
                                                    	<span class="required">*</span>
                                                    </label>
                                                    <div class="col-md-6">
                                                        <input id="OccupationTo" type="text" title="Occupation To" class="form-control date-picker" data-bind="kendoDateTimePicker: { value: OccupationTo, format: 'yyyy-MM-dd HH:mm:ss', timeFormat: 'HH:mm', readonly: true }, event: { change: ValidDate }" name="Datepicker" maxlength="16" />
                                                        <span class="validationError" data-bind="validationMessage: OccupationTo"></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label col-md-6">
                                                        Total Hours:
                                                    	<span class="required"></span>
                                                    </label>
                                                    <div class="col-md-6">
                                                        <div class="col-md-6 control-label">
                                                            <label class="col-md-12 displaytxt" style="text-transform: capitalize;" data-bind="text: TotalTime"></label>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>

                                        <!--File Upload-------------------------->
                                           <fieldset>
                                                <legend>Upload Sounding Chart</legend>
                                                <div class="row fileupload-buttonbar" data-bind=" visible: $root.isDelUploadFileVisible">
                                                    <div class="form-group">
                                                        
                                                        <div class="col-md-7">
                                                            <span class="btn green fileinput-button">
                                                                <i class="fa fa-plus"></i>
                                                                <span>Browse
                                                                </span>
                                                                <input type="file" name="files[]" id="fileToUpload" multiple>
                                                            </span>
                                                            <button type="button" data-bind="click: $root.uploadFile" class="btn blue start">
                                                                <i class="fa fa-upload"></i>
                                                                <span>Start upload
                                                                </span>
                                                            </button>
                                                        </div>

                                                        <div class="row" data-bind="visible: $root.isUploadFileVisible">
                                                            <div class="form-group">
                                                                <div class="col-md-7">
                                                                    &nbsp;&nbsp; <span id="spanHWPSfileToUpload" class="validationError" data-bind="visible: $root.isUploadFileVisible"></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>

                                                <div class="row">
                                                    <div class="table-responsive">
                                                        <table class="table table-striped table-bordered table-advance">
                                                            <thead>
                                                                <tr>
                                                                    <th class="bg-dark">Document Name</th>
                                                                    <th class="bg-dark"></th>

                                                                </tr>
                                                            </thead>
                                                            <tbody data-bind="foreach: BerthOccupationDocumentsVO">
                                                                <tr>
                                                                    <td><a data-bind="  text: FileName, attr: { href: '/FileDownload/Download/' + DocumentID() }">Document</a></td>
                                                                    <td><a href="#" class="btn default btn-xs red" data-bind="click: $root.DeleteDocument, visible: $root.isDelUploadFileVisible"><i class="fa fa-trash-o"></i>Delete</a></td>

                                                                </tr>

                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </fieldset>

                                       <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label col-md-6">
                                                        Remark:
                                                    	<span class="required"></span>
                                                    </label>
                                                    <div class="col-md-6">
                                                        <div class="col-md-6">
                                                            <textarea class="form-control" style="width:400px;" maxlength="500" rows="2" data-bind="value: Remarks, enable: $parent.editableView "></textarea>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>


                                        <br>
                                    </fieldset>
                                </div>
                            </div>
                            <div class="btns-group form-actions fluid">
                                <button type="submit" id="Save" class="btn green" value="POST VAL"
                                    data-bind="click: $parent.SaveBerthOccupation, visible: $parent.IsSave, disable: $parent.IsSaveUpdateDisabled">
                                    Save</button>
                                <button type="submit" class="btn green" data-bind="click: $parent.ModifyBerthOccupation, visible: $parent.IsUpdate, disable: $parent.IsSaveUpdateDisabled">Update</button>
                                <button type="submit" class="btn blue" data-bind="click: $parent.ResetBerthOccupation, visible: $parent.IsReset ">Reset</button>
                                <button type="submit" class="btn red" data-bind="click: $parent.CancelBerthOccupation">Cancel</button>
                            </div>

                        </div>
                    </div>
                </form>
            </div>
        </script>

    </div>
</div>

<!-- Main body content ends here for developers-->



<!-- END CONTENT -->




